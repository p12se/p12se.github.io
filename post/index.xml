<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on Notes</title>
    <link>http://p12se.github.io/post/</link>
    <description>Recent content in Posts on Notes</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Wed, 15 Jun 2016 21:04:29 +0600</lastBuildDate>
    <atom:link href="http://p12se.github.io/post/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Настройка nginx в качестве прокси-сервера для tomcat</title>
      <link>http://p12se.github.io/post/tomcat7_withs_nginx/</link>
      <pubDate>Wed, 15 Jun 2016 21:04:29 +0600</pubDate>
      
      <guid>http://p12se.github.io/post/tomcat7_withs_nginx/</guid>
      <description>&lt;p&gt;Появилась необходимость настроить nginx для tomcat. Nginx будет кешировать всю статику и отдавать ее сразу клиенту без обращения к tomcat, тем самым уменьшит нагрузку на tomcat в целом.&lt;/p&gt;


gzip on;
gzip_http_version 1.1;
gzip_vary on;
gzip_comp_level 5;
gzip_proxied any;
gzip_types text/plan text/css application/json application/x-javascript  
 text/xml application/xml application/xml+rss text/javascript application/javascript text/x-js;
gzip_buffers 16 8k;
gzip_disable &#34;MSIE [1-6]\.(?!.*SV1)&#34;;  

#Путь хранения кэша, уровень вложенности, имя и размер зоны, время не
#использования кэша после которого он удаляется, максимальный размер кэша 
proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=serg_cache:90m inactive=100m max_size=110m;


&lt;p&gt;Далее настроим, что нам необходимо кешировать и какие передавать заголовки tomcat. Кешируем все картинки, таблицы стилей и js. В своих файлах я добавляю параметр &lt;em&gt;?v=&lt;/em&gt; версию файла, при изменении я увеличиваем цифру или указываю дату (например так 20150223),  тем самым говорим бразеру, что бы он перезагрузил файл с сервера, а не брал копию из своего кэша. В коментарии есть пояснения для основных значений конфигурации.&lt;/p&gt;

&lt;p&gt;
location / {

if ($request_uri ~* &#34;.(jpg|jpeg|gif|css|png|ico|js)(\?v=[0-9.]+)?$&#34;) {
	#говорим браузеру, что кешированные файлы нужно хранить 3 дня 
	expires 3d;
	access_log off;
	break;
}

proxy_set_header X-Forwarded-Host $host;
proxy_set_header X-Forwarded-Server $host;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header Host $host;
proxy_set_header X-Forwarded-Proto $scheme;

add_header X-Cache-Status $upstream_cache_status;

#адресс tomcat
proxy_pass http://localhost:8080;

index index.jsp
proxy_ignore_headers X-Accel-Expires Expires Cache-Control;
proxy_cache serg_cache;
proxy_cache_min_uses 1;
proxy_cache_valid 200 302 120m;
proxy_cache_valid 404 1m;
proxy_cache_use_stale error timeout invalid_header http_500 http_502 http_503 http_504;

set $no_cache &#34;&#34;;

#не кешировать если у пользователя есть кука начинающаяся на JSESSION
if ($http_cookie ~* &#34;JSESSION*&#34;){
	set $no_cache 1;
}

#если в uri есть management или client
if ($request_uri ~* &#34;(/management*|/client*)&#34;) {
	set $no_cache 1;
}

proxy_no_cache $no_cache;
proxy_cache_bypass $no_cache;
}
&lt;/p&gt;

&lt;p&gt;Теперь необходимо настроить сам tomcat. Для этого достаточно в файле server.xml прописать.

&lt;Connector port=&#34;8080&#34; protocol=&#34;HTTP/1.1&#34;
    connectionTimeout=&#34;20000&#34;
    address=&#34;127.0.0.1&#34;
    URIEncoding=&#34;UTF-8&#34;
    redirectPort=&#34;8443&#34; /&gt;
&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Установка драйверов CH340, CH341 для китайстойкой arduino в mac os el capitan</title>
      <link>http://p12se.github.io/post/install_driver_ch340_341_arduino_for_mac_os_el_capitan/</link>
      <pubDate>Wed, 15 Jun 2016 14:11:01 +0600</pubDate>
      
      <guid>http://p12se.github.io/post/install_driver_ch340_341_arduino_for_mac_os_el_capitan/</guid>
      <description>&lt;p&gt;Для того, что бы подключить китайскую arduino mega, пришлось мне изрядно повозиться.&lt;/p&gt;

&lt;p&gt;Проблема заключалась в том, что в устройство не  определялось на моей системе El Capitan. Простая установка драйверов под чипы &lt;strong&gt;CH340G, CH340, CH341&lt;/strong&gt; не давала необходимого результата.&lt;/p&gt;

&lt;p&gt;Для решения этой проблемы необходимо проделать следующие действия:&lt;br /&gt;
* перезагружаем свою систему;&lt;br /&gt;
* во время загрузки нажимаем &lt;strong&gt;CMD+R&lt;/strong&gt; после загрузки попадаем в режим восстановления;&lt;br /&gt;
* запускаем терминал и вводим команду  &lt;code&gt;csrutil enable --without kext&lt;/code&gt;;&lt;br /&gt;
* перезагружаем.&lt;/p&gt;

&lt;p&gt;После того как загрузилась система необходимо скачать драйвера &lt;a href=&#34;http://www.wch.cn/download/CH341SER_MAC_ZIP.html&#34;&gt;http://www.wch.cn/download/CH341SER_MAC_ZIP.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Устанавливайте их, затем в Arduino.app переходим в Инструменты -&amp;gt; Порт&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>